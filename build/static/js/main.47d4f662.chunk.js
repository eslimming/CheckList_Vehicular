(this["webpackJsonpforge-Hon-Checklist"]=this["webpackJsonpforge-Hon-Checklist"]||[]).push([[0],{1087:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(18),l=a.n(o),r=(a(432),a(30)),c=a(31),s=a(48),u=a(32),d=a(33),m=a(84),h=a.n(m),p=a(3),v=a(424),f=a(108),g=a.n(f),E=a(188),k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){n.setState({value:e.val}),n.props.onDato(e),n.textInput.focus()},n.state={value:""},n.textInput=null,n.setTextInputRef=function(e){n.textInput=e},n.focusTextInput=function(){n.textInput&&n.textInput.focus()},n}return Object(c.a)(a,[{key:"handleChecked",value:function(e,t){return e===t}},{key:"componentWillMount",value:function(){var e="";this.props.items.map((function(t){return e=t.value?t.label:e})),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.props.idGrupo;return i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"oculto",ref:this.setTextInputRef}),i.a.createElement(p.Badge,{color:""===this.state.value?"red":"green",empty:!0}),this.props.items.map((function(a){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Radio,{key:a.id,label:a.label,disabled:!1,name:"RadioGroup",checked:e.handleChecked(e.state.value,a.label),onChange:function(){return e.handleOnChange({key:t,id:a.id,val:a.label})}}))})))}}]),a}(i.a.Component),b=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){n.setState({value:e.val}),n.props.onDato(e)},n.state={fileError:"",value:"",acceptedFiles:[],rejectedFiles:[]},n}return Object(c.a)(a,[{key:"handleValue",value:function(e,t){return e===t}},{key:"componentWillMount",value:function(){var e="";this.props.items.map((function(t){return e=t.value})),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.props.idGrupo;return i.a.createElement(i.a.Fragment,null,this.props.items.map((function(a){return i.a.createElement(i.a.Fragment,null,"\xa0\xa0\xa0\xa0\xa0",i.a.createElement(p.Badge,{color:""===e.state.value?"red":"green",empty:!0}),a.label,i.a.createElement(p.TextArea,{key:a.id,fluid:!0,value:e.state.value,onChange:function(n){return e.handleOnChange({key:t,id:a.id,val:n})}}))})))}}]),a}(i.a.Component),y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){isNaN(e.val)?n.props.onRemoveDato(e):(n.setState({value:e.val}),n.props.onDato(e)),""===e.val&&n.props.onRemoveDato(e)},n.state={fileError:"",value:0,acceptedFiles:[],rejectedFiles:[]},n}return Object(c.a)(a,[{key:"handleValue",value:function(e,t){return e===t}},{key:"componentWillMount",value:function(){var e="";this.props.items.map((function(t){return e=t.value})),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.props.idGrupo;return i.a.createElement(i.a.Fragment,null,this.props.items.map((function(a){return i.a.createElement(i.a.Fragment,null,"\xa0\xa0\xa0\xa0\xa0",i.a.createElement(p.Badge,{color:""===e.state.value?"red":"green",empty:!0}),a.label,i.a.createElement(p.Input,{type:"number",key:a.id,fluid:!0,value:e.state.value,onChange:function(n){return e.handleOnChange({key:t,id:a.id,val:n})},min:0}))})))}}]),a}(i.a.Component),C=a(21),O=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){n.setState({value:e.val}),n.props.onDato(e)},n.state={value:""},n}return Object(c.a)(a,[{key:"handleValue",value:function(e,t){return e===t}},{key:"componentWillMount",value:function(){var e="";this.props.items.map((function(t){return e=t.value})),this.setState({value:e})}},{key:"componentDidMount",value:function(){document.activeElement.blur()}},{key:"render",value:function(){var e=this,t=this.props.idGrupo;return i.a.createElement("div",{id:"blur"},i.a.createElement(C.LocalizationConfig,{languageCode:"es-CL"},this.props.items.map((function(a){return i.a.createElement(p.DatePicker,{className:"abajo",key:a.id,type:"date",helperText:a.label,closeOnDocumentClick:!0,fluid:!0,reserveSpace:!0,displayFormat:"DD-MM-YYYY",value:e.state.value,onChange:function(n){return e.handleOnChange({key:t,id:a.id,val:n})},readOnly:!1,disabled:!1,showYearSelector:!0})}))))}}]),a}(i.a.Component),S=a(137),T=a(258),F=T.api_fotos,P={authorization:T.authorization},j=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){n.setState({value:e.val}),n.props.onDato(e)},n.state={fileError:"",value:"",acceptedFiles:[],rejectedFiles:[]},n}return Object(c.a)(a,[{key:"handleValue",value:function(e,t){return e===t}},{key:"componentWillMount",value:function(){var e="";this.props.items.map((function(t){return e=t.value})),this.setState({value:e})}},{key:"Subir",value:function(){var e=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(t),a,{headers:n});case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.acceptedFiles,n=t.rejectedFiles,o=this.props.idGrupo;return i.a.createElement(i.a.Fragment,null,this.props.items.map((function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.FileDrop,{key:t.id,label:i.a.createElement(i.a.Fragment,null,i.a.createElement("h5",null,"\xa0\xa0\xa0\xa0\xa0",i.a.createElement(p.Badge,{color:""===e.state.value?"red":"green",empty:!0}),t.label)),buttonText:"Tomar Foto",resetButtonText:"Enviar Fotos",acceptedTypes:["image/*"],placeholder:"Arrastrar Archivo (maximo: 5MB)",maxSize:"5000000",error:e.state.fileError,onAccepted:function(t){e.setState({acceptedFiles:[].concat(Object(S.a)(a),Object(S.a)(t))})},onRejected:function(t){e.setState({rejectedFiles:[].concat(Object(S.a)(n),Object(S.a)(t)),fileError:"uno o mas archivos fueron rechazados"})},onReset:function(){e.handleOnChange({key:o,id:t.id,val:"ok"}),e.setState({rejectedFiles:[],acceptedFiles:[],fileError:""}),e.state.acceptedFiles.map((function(t,a){var n=new FormData;n.append("archivo",t),n.append("nombreArchivo",a+1+"_"+(1e6*Math.random()).toFixed(0)+"_"+t.name),n.append("path","upload/checklist/"+e.props.token);try{return e.Subir(F,n,P),null}catch(i){return console.log(i),null}}))}}),i.a.createElement("h6",null,"Fotos Aceptadas:"),a&&a.map((function(e){return i.a.createElement("p",null,e.name," - ",e.size," bytes")})),i.a.createElement("h6",null,"Fotos Rechazadas:"),n&&n.map((function(e){return i.a.createElement("p",null,e.name," - ",e.size," bytes")})))})))}}]),a}(i.a.Component);function R(e){var t=e.items;return"checkboxes"===t.type?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,null,t.label),i.a.createElement(p.Table.Cell,{textAlign:"right"},i.a.createElement(k,{key:e.idGrupo,idGrupo:e.idGrupo,items:t.items,onDato:e.onDato})," "))):"textareas"===t.type?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,null," ",i.a.createElement(b,{key:e.idGrupo,idGrupo:e.idGrupo,items:t.items,onDato:e.onDato})," "))):"numberareas"===t.type?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,null," ",i.a.createElement(y,{key:e.idGrupo,idGrupo:e.idGrupo,items:t.items,onDato:e.onDato,onRemoveDato:e.onRemoveDato})," "))):"datepickers"===t.type?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,null,t.label),i.a.createElement(p.Table.Cell,{textAlign:"right"}," ",i.a.createElement(O,{key:e.idGrupo,idGrupo:e.idGrupo,items:t.items,onDato:e.onDato})," "))):"fileuploads"===t.type?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,{textAlign:"left"}," ",i.a.createElement(j,{key:e.idGrupo,token:e.token,idGrupo:e.idGrupo,items:t.items,onDato:e.onDato})," "))):i.a.createElement(i.a.Fragment,null)}var _=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleDato=function(e){n.props.onhandleGeneralDato(e)},n.handleRemoveDato=function(e){n.props.onhandleGeneralRemoveDato(e)},n.state={activeName:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.id;return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Table,{key:t},i.a.createElement(p.Table.Header,null,i.a.createElement(p.Table.HeaderCell,{content:this.props.titulo,textAlign:"left"})),i.a.createElement(p.Table.Body,null,this.props.items.map((function(a){return i.a.createElement(i.a.Fragment,null,i.a.createElement(R,{key:a.id,token:e.props.token,idGrupo:t+"-"+a.id,items:a,onDato:e.handleDato,onRemoveDato:e.handleRemoveDato}))}))),i.a.createElement(p.Table.Footer,null,i.a.createElement(p.Table.Row,{align:"center"},i.a.createElement(p.Table.HeaderCell,{colSpan:2})))))}}]),a}(i.a.Component),w=(a(259),a(260),a(261)),x=a(258),D=x.api_formulario,M=x.api_resultado,I={authorization:x.authorization},N=function(e){var t=e.closeToast,a=e.Texto,n=e.Detalle;return i.a.createElement(p.Notification,{className:"toast-notification",severity:"critical",onCloseClick:t,hasIcon:!0,title:a,detailsText:n,onDetailsClick:function(){}})},L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleGeneralRemoveDato=function(e){var t=n.state.items.filter((function(t){return t.key!==e.key})),a=[];t.map((function(e){return a=a.concat([{idPregunta:e.key.split("-")[1],Respuesta:e.val}])}));var i=e.key.split("-"),o=n.state.datos.filter((function(e){return e.id===parseInt(i[0])})),l=[];o.map((function(e){return l=l.concat(e.datos)}));var r=l.filter((function(e){return e.id===parseInt(i[1])})),c=n.state.Preguntas_Respondidas.filter((function(e){return e!==r[0].label}));n.setState({Preguntas_Respondidas:c});var s=[];r.map((function(t){return"checkboxes"===t.type?(s=s.concat(t.items)).map((function(t){return t.label===e.val?t.value=1:t.value=0})):("textareas"===t.type||"numberareas"===t.type||"datepickers"===t.type||"fileuploads"===t.type)&&(s=s.concat(t.items)).map((function(t){return t.value=e.val})),null})),n.setState({items:t,respuestas:a})},n.handleGeneralDato=function(e){var t=n.state.items.filter((function(t){return t.key!==e.key})).concat(e),a=[];t.map((function(e){return a=a.concat([{idPregunta:e.key.split("-")[1],Respuesta:e.val}])}));var i=e.key.split("-"),o=n.state.datos.filter((function(e){return e.id===parseInt(i[0])})),l=[];o.map((function(e){return l=l.concat(e.datos)}));var r=l.filter((function(e){return e.id===parseInt(i[1])})),c=n.state.Preguntas_Respondidas;-1===c.indexOf(r[0].label)&&(c.push(r[0].label),n.setState({Preguntas_Respondidas:c}));var s=[];r.map((function(t){return"checkboxes"===t.type?(s=s.concat(t.items)).map((function(t){return t.label===e.val?t.value=1:t.value=0})):("textareas"===t.type||"numberareas"===t.type||"datepickers"===t.type||"fileuploads"===t.type)&&(s=s.concat(t.items)).map((function(t){return t.value=e.val})),null})),n.setState({items:t,respuestas:a})},n.state={isLoading:!0,hidden:"hidden",activePage:0,datos:[],items:[],respuestas:[],apiBody:"",modal:!1,modalFin:!1,Preguntas_Todas:[],Preguntas_Respondidas:[],Preguntas_Faltantes:[],Situacion_Final:"",Color_Situacion_Final:"",MensajeAPI:""},n.click_Next=n.click_Next.bind(Object(s.a)(n)),n.click_Prev=n.click_Prev.bind(Object(s.a)(n)),n.click_Send=n.click_Send.bind(Object(s.a)(n)),n.click_ModalSi=n.click_ModalSi.bind(Object(s.a)(n)),n.click_ModalNo=n.click_ModalNo.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;try{h.a.post("".concat(D),{idPlanta:this.props.idPlanta},{headers:I}).then((function(t){var a=JSON.parse(t.data[0].JsonString);e.setState({datos:a,isLoading:!1})}))}catch(t){console.log(t)}}},{key:"componentDidMount",value:function(){var e=this;try{setInterval(Object(E.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.isLoading&&h.a.post("".concat(D),{idPlanta:e.props.idPlanta},{headers:I}).then((function(t){var a=JSON.parse(t.data[0].JsonString);e.setState({datos:a,isLoading:!1})}));case 1:case"end":return t.stop()}}),t)}))),5e3)}catch(t){console.log(t)}}},{key:"click_Next",value:function(){var e=this,t=[];this.state.datos[this.state.activePage].datos.map((function(e){return t.push(e.label)}));var a=t.filter((function(t){return!e.state.Preguntas_Respondidas.includes(t)}));this.setState({Preguntas_Todas:t,Preguntas_Faltantes:a});var n,o=Number(this.state.datos[this.state.activePage].id),l=this.state.datos[this.state.activePage].datos.length,r=0;(this.state.items.map((function(e){return parseInt(e.key.split("-")[0])===o?r+=1:null})),r<l)?(n=l-r===1?"Falta un dato":"Faltan "+(l-r)+" datos",w.toast(i.a.createElement(N,{Detalle:JSON.stringify(a).replace("[","").replace("]",""),Texto:n,closeToast:!0}))):(this.state.activePage>=this.state.datos.length-2&&this.setState({hidden:""}),this.state.activePage<this.state.datos.length-1&&(this.setState({activePage:this.state.activePage+1}),window.scrollTo(1,1)))}},{key:"click_Prev",value:function(){var e=Number(this.state.datos[this.state.activePage].id),t=0;this.state.items.map((function(a){return parseInt(a.key.split("-")[0])===e?t+=1:null})),this.state.activePage>0&&(this.setState({activePage:this.state.activePage-1}),window.scrollTo(1,1))}},{key:"click_Send",value:function(){this.setState({modal:!0})}},{key:"click_ModalSi",value:function(){var e=this;try{this.setState({isLoading:!0,modal:!1});var t="";this.state.respuestas.map((function(a){return t+="('".concat(e.props.token,"',1,").concat(e.props.idPlanta,",").concat(e.props.idUsuario,",").concat(e.props.idVehiculo,",").concat(a.idPregunta,",'").concat(a.Respuesta,"'),")}));var a="Vehiculo Operativo\nConductor: Autorizado",n="green\ngreen";t.includes("'M'")?(a="Fuera de Servicio. Programar Mantenci\xf3n Correctiva\nConductor: Autorizado",n="red\ngreen"):t.includes("'R'")&&(a="Programar Mantenci\xf3n Preventiva\nConductor: Autorizado",n="yellow\ngreen"),h.a.post("".concat(M),{Query:t},{headers:I}).then((function(t){var i=t.data;i[0].Mensaje.includes("RV")?(a="Fuera de Servicio. Programar Mantenci\xf3n Correctiva\nConductor: Autorizado",n="red\ngreen"):i[0].Mensaje.includes("AV")?(a="Programar Mantenci\xf3n Preventiva\nConductor: Autorizado",n="yellow\ngreen"):i[0].Mensaje.includes("VV")?(a="Vehiculo Operativo\nConductor: Autorizado",n="green\ngreen"):i[0].Mensaje.includes("RR")?(a="Fuera de Servicio. Programar Mantenci\xf3n Correctiva\nConductor: No Autorizado",n="red\nred"):i[0].Mensaje.includes("AR")?(a="Programar Mantenci\xf3n Preventiva\nConductor: No Autorizado",n="yellow\nred"):i[0].Mensaje.includes("VR")&&(a="Vehiculo Operativo\nConductor: No Autorizado",n="green\nred"),e.setState({isLoading:!1,modalFin:!0,Situacion_Final:a,Color_Situacion_Final:n,MensajeAPI:i[0].Mensaje})}))}catch(i){console.log(i),this.setState({isLoading:!1})}}},{key:"click_ModalNo",value:function(){this.setState({modal:!1})}},{key:"click_ModalFin",value:function(){window.location.reload(!1)}},{key:"render",value:function(){return this.state.isLoading?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Header,{menu:!0,title:this.props.Patente}),i.a.createElement(p.Card,null,i.a.createElement(p.Card.Header,null),i.a.createElement(p.Card.Content,null,i.a.createElement(p.Loader,{minHeight:400},i.a.createElement("div",{className:"placeholder"})))),i.a.createElement(p.Footer,{copyrightText:"\xa9 "+(new Date).getFullYear()+" Honeywell Chile"},i.a.createElement(p.Footer.Item,{href:"#"},"Terms & Conditions"),i.a.createElement(p.Footer.Item,{href:"#"},"Privacy Policy"))):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Header,{menu:!0,title:this.props.Patente}),i.a.createElement(_,{key:1,token:this.props.token,id:this.state.datos[this.state.activePage].id,titulo:this.state.datos[this.state.activePage].titulo,items:this.state.datos[this.state.activePage].datos,onhandleGeneralDato:this.handleGeneralDato,onhandleGeneralRemoveDato:this.handleGeneralRemoveDato}),this.renderModal(),this.renderModalFin(),i.a.createElement("table",{style:{width:"100%"}},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(p.Button,{type:"primary",icon:"caret-left",size:"small",content:"",iconPosition:"left",onClick:this.click_Prev,disabled:this.state.isLoading})),i.a.createElement("td",{style:{textAlign:"center"}},i.a.createElement(p.Button,{className:this.state.hidden,type:"primary",loading:this.state.isLoading,size:"small",content:"Terminar",iconPosition:"right",onClick:this.click_Send,disabled:this.state.isLoading})),i.a.createElement("td",{style:{textAlign:"right"}},i.a.createElement(p.Button,{type:"primary",icon:"caret-right",size:"small",content:"",iconPosition:"right",onClick:this.click_Next,disabled:this.state.isLoading}))),i.a.createElement("tr",null,i.a.createElement("td",{colspan:"2"})),i.a.createElement("tr",null,i.a.createElement("td",{colspan:"2"})),i.a.createElement("tr",null,i.a.createElement("td",{colspan:"2"}))),i.a.createElement("div",null,i.a.createElement(w.ToastContainer,{hideProgressBar:!1,closeOnClick:!1,closeButton:!1,newestOnTop:!0,position:"bottom-right",autoClose:2500,toastClassName:"toast-notification-wrap"})),i.a.createElement(p.Footer,{copyrightText:"\xa9 "+(new Date).getFullYear()+" Honeywell Chile"},i.a.createElement(p.Footer.Item,{href:"#"},"Terms & Conditions"),i.a.createElement(p.Footer.Item,{href:"#"},"Privacy Policy")))}},{key:"renderModal",value:function(){var e=this;return i.a.createElement(p.Modal,{closeIcon:!0,size:"mini",onClose:function(){return e.setState({modal:!1})},open:this.state.modal,closeOnDimmerClick:!1},i.a.createElement(p.Modal.Header,null,"\xbfEst\xe1 Seguro?"),i.a.createElement(p.Modal.Content,null),i.a.createElement(p.Modal.Footer,null,i.a.createElement(p.Button,{type:"secondary",size:"small",content:"No",onClick:this.click_ModalNo,disabled:this.state.isLoading}),i.a.createElement(p.Button,{type:"primary",size:"small",content:"Si",onClick:this.click_ModalSi,disabled:this.state.isLoading})))}},{key:"renderModalFin",value:function(){var e=this;return i.a.createElement(p.Modal,{size:"mini",onClose:function(){return e.setState({modalFin:!1})},open:this.state.modalFin,closeOnDimmerClick:!1},i.a.createElement(p.Modal.Header,null,"Formulario Enviado"),i.a.createElement(p.Modal.Content,null,"Situacion Final:",i.a.createElement("br",null),i.a.createElement(p.Badge,{color:this.state.Color_Situacion_Final.split("\n")[0]},this.state.Situacion_Final.split("\n")[0]," "),i.a.createElement("br",null),i.a.createElement(p.Badge,{color:this.state.Color_Situacion_Final.split("\n")[1]},this.state.Situacion_Final.split("\n")[1]," ")),i.a.createElement(p.Modal.Footer,null,i.a.createElement(p.Button,{type:"secondary",size:"small",content:"Cerrar",onClick:this.click_ModalFin})))}},{key:"notify",value:function(){w.toast(i.a.createElement(N,{closeToast:!0}))}}]),a}(i.a.Component),z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={hidden:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){setTimeout(function(){this.setState({hidden:"hidden"})}.bind(this),2500)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Header,{menu:!0,title:"Reporte"}),i.a.createElement("div",{className:this.state.hidden},i.a.createElement(p.Loader,{minHeight:400})),i.a.createElement("iframe",{width:"100%",height:"1100px",src:"https://checklist.kairosmining.com/SSRS/SSRS.aspx",frameborder:"200",title:"SSRS"}),i.a.createElement(p.Footer,{copyrightText:(new Date).getFullYear()+" Honeywell Chile"},i.a.createElement(p.Footer.Item,{href:"#"},"Terms & Conditions"),i.a.createElement(p.Footer.Item,{href:"#"},"Privacy Policy")))}}]),a}(n.Component),B=a(261),G=function(e){var t=e.closeToast,a=e.Texto;return i.a.createElement(p.Notification,{className:"toast-notification",severity:"critical",onCloseClick:t,hasIcon:!0,title:a,detailsText:"Intentelo nuevamente",onDetailsClick:function(){}})},A=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){var t,a;n.state.vehiculos.filter((function(t){return t.idPlanta===e.split("$")[0]&t.idVehiculo===e.split("$")[1]})).map((function(e){return t=e.estado,a=e.idVehiculo,null})),n.setState({idPlanta:Number(e.split("$")[0]),Patente:e.split("$")[2],idVehiculo:Number(a),estadoVehiculo:t})},n.state={selector:[],estadoVehiculo:"",idVehiculo:0,Patente:"",idPlanta:0,habilitarBoton:!1,comenzar:0,hidden:"hidden"},n.onButtonClick=n.onButtonClick.bind(Object(s.a)(n)),n.onReporteClick=n.onReporteClick.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.vehiculos[0].vehiculos,t=[];e.map((function(e){return t.push({value:e.idPlanta+"$"+e.idVehiculo+"$"+e.patente,text:e.patente+" ("+e.planta+")"})})),this.setState({vehiculos:e,selector:t})}},{key:"onButtonClick",value:function(){this.setState({comenzar:1})}},{key:"onReporteClick",value:function(){this.setState({comenzar:2})}},{key:"render",value:function(){var e=this;return 1===this.state.comenzar?i.a.createElement(L,{idUsuario:this.props.idUsuario,token:this.props.token,idVehiculo:this.state.idVehiculo,Patente:this.state.Patente,idPlanta:this.state.idPlanta}):2===this.state.comenzar?i.a.createElement(z,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.Header,{title:"CheckList"}),i.a.createElement(p.Table,null,i.a.createElement(p.Table.Body,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,{textAlign:"center"},i.a.createElement(p.Select,{fluid:!0,placeholder:"Seleccione el Vehiculo",options:this.state.selector,onChange:function(t){return e.handleOnChange(t)}}),i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(p.Button,{className:"fullancho",disabled:"OK"!==this.state.estadoVehiculo,fluid:!0,content:"Comenzar",onClick:this.onButtonClick})),i.a.createElement(v.BrowserView,null,i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement("td",{onClick:this.onReporteClick},i.a.createElement(p.Icon,{name:"document-report",root:"common"})))))),i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,{textAlign:"left"},i.a.createElement("div",null,this.state.vehiculos.filter((function(t){return Number(t.idPlanta)===e.state.idPlanta&Number(t.idVehiculo)===e.state.idVehiculo})).map((function(e){return i.a.createElement(i.a.Fragment,null,"OK"===e.estado?"Vehiculo Habilitado":e.estado,"\xa0\xa0\xa0",i.a.createElement(p.Icon,{name:"OK"===e.estado?"badge-check":"badge-stop",root:"common"}),i.a.createElement("br",null),i.a.createElement(p.List,{bulleted:!0},i.a.createElement(p.List.Content,null,"Permiso Circulaci\xf3n: ",e.permiso_Circulacion),i.a.createElement(p.List.Content,null,"Seguro Obligatorio: ",e.seguro_Obligatorio),i.a.createElement(p.List.Content,null,"Revision T\xe9cnica: ",e.revision_Tecnica),i.a.createElement(p.List.Content,null,"Responsable: ",e.responsable),i.a.createElement(p.List.Content,null,"Ultima Revision: ",e.lastchecklist)))}))))))),i.a.createElement("div",null,i.a.createElement(B.ToastContainer,{hideProgressBar:!1,closeOnClick:!1,closeButton:!1,newestOnTop:!0,position:"bottom-right",autoClose:2500,toastClassName:"toast-notification-wrap"})),i.a.createElement(p.Footer,{copyrightText:"\xa9 "+(new Date).getFullYear()+" Honeywell Chile"},i.a.createElement(p.Footer.Item,{href:"#"},"Terms & Conditions"),i.a.createElement(p.Footer.Item,{href:"#"},"Privacy Policy")))}},{key:"notify",value:function(){B.toast(i.a.createElement(G,{closeToast:!0}))}}]),a}(i.a.Component),V=a(261),J=a(258),U=J.api_login,H={authorization:J.authorization};function W(){var e;return e="true"===localStorage.getItem("checklistTheme")?Object(n.lazy)((function(){return Promise.all([a.e(4),a.e(6)]).then(a.bind(null,1094))})):Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(5)]).then(a.bind(null,1095))})),i.a.createElement(n.Suspense,{fallback:null},i.a.createElement(e,null))}var Y=function(e){var t=e.closeToast,a=e.Texto;return i.a.createElement(p.Notification,{className:"toast-notification",severity:"critical",onCloseClick:t,hasIcon:!0,title:a,detailsText:"Intentelo nuevamente",onDetailsClick:function(){}})},$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleOnChangeTheme=function(e){localStorage.setItem("checklistTheme",e.toString()),window.location.reload()},n.state={tema:localStorage.getItem("checklistTheme"),hidden:"hidden",RUT:"",vehiculos:[],idUsuario:0,token:"",isLoading:!1,JsonString:[]},n.onButtonClick=n.onButtonClick.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"onButtonClick",value:function(){var e=this;if(this.setState({isLoading:!0}),this.state.RUT.length<7)this.setState({idUsuario:-1,isLoading:!1});else try{h.a.post("".concat(U),{RUT:this.state.RUT,idPais:1},{headers:H}).then((function(t){var a=JSON.parse(t.data[0].JsonString);e.setState({idUsuario:Number(a[0].idUsuario),token:a[0].token,vehiculos:a,isLoading:!1})}))}catch(t){this.setState({idUsuario:-2,isLoading:!1,JsonString:t})}}},{key:"componentDidMount",value:function(){setTimeout(function(){this.setState({hidden:""})}.bind(this),75)}},{key:"render",value:function(){var e=this;return this.state.idUsuario>0?i.a.createElement(A,{idUsuario:this.state.idUsuario,token:this.state.token,vehiculos:this.state.vehiculos}):i.a.createElement("div",{className:this.state.hidden},i.a.createElement(W,{onLoaded:this.handleLoaded}),i.a.createElement(p.Header,{title:"CheckList"}),i.a.createElement(p.Grid,null,i.a.createElement(p.Grid.Row,null,i.a.createElement(p.Grid.Column,{width:4,sWidth:12},i.a.createElement(p.Statistic,{value:"",fluid:!0})),i.a.createElement(p.Grid.Column,{width:4,sWidth:12},i.a.createElement(p.Statistic,{value:"CheckList Vehicular",fluid:!0})),i.a.createElement(p.Grid.Column,{width:4,sWidth:12}))),i.a.createElement(p.Table,{className:"bottom"},i.a.createElement(p.Table.Body,null,i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,{textAlign:"center"},i.a.createElement(p.Input,{fluid:!0,disabled:this.state.isLoading,placeholder:"RUT",value:this.state.RUT,onChange:function(t){return e.setState({RUT:t})}}),i.a.createElement("div",{style:{paddingTop:10}},i.a.createElement(p.Button,{className:"fullancho",disabled:this.state.isLoading,loading:this.state.isLoading,fluid:!0,icon:i.a.createElement(p.Icon,{name:"user",root:"common"}),content:"Ingresar",onClick:this.onButtonClick})))),i.a.createElement(p.Table.Row,null,i.a.createElement(p.Table.Cell,{textAlign:"right"},i.a.createElement(p.Checkbox,{label:"true"===this.state.tema?"Light":"Dark",toggle:!0,checked:"true"===this.state.tema,onChange:function(t){return e.handleOnChangeTheme(t)}}))))),function(){switch(e.state.idUsuario){case-1:V.toast(i.a.createElement(Y,{Texto:"Usuario Invalido",closeToast:!0})),e.setState({idUsuario:0});break;case-2:V.toast(i.a.createElement(Y,{Texto:"Error API",closeToast:!0})),e.setState({idUsuario:0});break;default:return null}}(),i.a.createElement("div",null,i.a.createElement(V.ToastContainer,{hideProgressBar:!1,closeOnClick:!1,closeButton:!1,newestOnTop:!0,position:"bottom-right",autoClose:2500,toastClassName:"toast-notification-wrap"})))}},{key:"notify",value:function(){V.toast(i.a.createElement(Y,{closeToast:!0}))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},258:function(e){e.exports=JSON.parse('{"api_fotos0":"https://apicorecamionetas.kairosmining.com","api_fotos":"https://apikairos.kairosmining.com/api/upload","api_login":"https://apikairos.kairosmining.com/api/vehicular/sp_Json_Login","api_formulario":"https://apikairos.kairosmining.com/api/vehicular/sp_Json_Formulario","api_resultado":"https://apikairos.kairosmining.com/api/vehicular/sp_Json_AddResultado","authorization":"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c3IiOiJlc2xpbW1pbmciLCJlbWwiOiJlZHVhcmRvLnNsaW1taW5nQGhvbmV5d2VsbC5jb20iLCJpYXQiOjE2MjAyNDI2OTgsImV4cCI6MjEzODYzOTA5OH0.GZ0oadipFTi8HGozULjPvGp7pTSpTnCBmQdEtMPDOIA"}')},260:function(e,t,a){},427:function(e,t,a){e.exports=a(1087)},432:function(e,t,a){},754:function(e,t){}},[[427,1,2]]]);
//# sourceMappingURL=main.47d4f662.chunk.js.map